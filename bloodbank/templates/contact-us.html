{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
      {% include 'widgets/style-head.html' %}
    </head>
<body>
{% include 'widgets/navbar.html' %}
  <button class="scroll-btn"><i class="fa-solid fa-arrow-up"></i></button>
  <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d27484.135871581308!2d30.988065337149802!3d30.562948028629144!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14f7d68b68933ea3%3A0x77434af2db2fa06f!2sShebeen%20El-Kom%2C%20Qism%20Shebeen%20El-Kom%2C%20Shibin%20el%20Kom%2C%20Menofia%20Governorate!5e0!3m2!1sen!2seg!4v1715275487138!5m2!1sen!2seg" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
  <div class="contact-us">
    <div class="container">
      <div class="row">
        <div class="col-md-6 col-12">
          <h3>GET IN TOUCH</h3>
          <p class="contact-p">Nunc ullamcorper massa enim, malesuada consectetur augue rhoncus vel. Vivamus et tristique sem. Fusce in lorem et nibh. 
            Lorem ipsum dolor sit amet, con duo secte tue adipiscing elit, sed tinci dun tut laoreet dolore mag na aliquam erat volutpa lore.
          </p>
          <div class="row">
            <div class="col-md-6 col-12 element">
              <div class="row">
                <div class="col-2"> <i class="fa-solid fa-location-dot"></i> </div>
                <div class="col-10 text"> <span>OUR ADDRESS</span> <p>Shebin elkom, menofia , Egypt </p> </div>
              </div>
            </div>
            <div class="col-md-6 col-12 element">
              <div class="row">
                <div class="col-2"> <i class="fa-solid fa-phone"></i> </div>
                <div class="col-10 text"> <span>PHONE NUMBER</span> <p>+31 123 456 7890 â€“ Office</p> </div>
              </div>
            </div>
            <div class="col-md-6 col-12 element">
              <div class="row">
                <div class="col-2"> <i class="fa-solid fa-envelope"></i> </div>
                <div class="col-10 text"> <span>EMAIL ADDRESS</span> <p>contact@lab.city.ltd.com</p> </div>
              </div>
            </div>
            <div class="col-md-6 col-12 element">
              <div class="row">
                <div class="col-2"> <i class="fa-solid fa-gear"></i> </div>
                <div class="col-10 text"> <span>WORKING HOURS</span> <p>Mon to Fri: 9am to 8pm</p> </div>
              </div>
            </div>
          </div>
        </div>
        <form id="contactForm" class="col-md-6 col-12">
          <div class="container">
            <div class="row">
              <h3>DROP US A LINE</h3>
              <div class="col-md-6 col-12">
                <input type="text" name="name" placeholder="Your Name" value="{{request.user.name}}" required>
              </div>
              <div class="col-md-6 col-12">
                <input type="email" name="email" placeholder="Your Mail" value="{{request.user.email}}" required>
              </div>
              <div class="col-md-6 col-12">
                <input type="text" name="phone" placeholder="Your Phone" value="{{request.user.phone}}" required> 
              </div>
              <div class="col-md-6 col-12">
                <input type="text" name="subject" placeholder="Subject" required>
              </div>
              <div class="col-12">
                <input name="message" placeholder="Message" required >
              </div>
              <div class="col-md-6 col-12">
                <button type="submit">SEND MESSAGE</button>
              </div>
            </div>
          </div>
        </form>
        <h1 style="display: none; margin: auto;" class="col-md-6 col-12 text-center justify-content-center algin-items-center" id="successfully-sent">We Received Your Message</h1>
      </div>
    </div>
  </div>
  {% include 'widgets/trusted.html' %}
  {% include 'widgets/footer.html' %}
  {% include 'widgets/script-body.html' %}
  <script>
    const form = document.getElementById('contactForm');
    document.addEventListener("DOMContentLoaded", function() {
        form.addEventListener('submit', sendMessage);
    });

    async function sendMessage(event) {
        event.preventDefault();
        const name = document.querySelector('input[name="name"]').value;
        const email = document.querySelector('input[name="email"]').value;
        const phone = document.querySelector('input[name="phone"]').value;
        const subject = document.querySelector('input[name="subject"]').value;
        const message = document.querySelector('input[name="message"]').value;

        const response = await fetch('/api/contact-us/mail/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': '{{ csrf_token }}'
            },
            body: JSON.stringify({
                name,
                email,
                phone,
                subject,
                message
            })
        });

        if (response.ok) {
            form.style.display = 'none';
            document.getElementById('successfully-sent').style.display = 'block';
        } else {
            alert('Failed to send message. Please try again.');
        }
    }
  </script>
</body>
</html>
